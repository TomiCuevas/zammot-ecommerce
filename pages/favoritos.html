<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favoritos - ZAMMOT</title>
    <link rel="icon" type="image/webp" href="../styles/img/zammot_bowtie.webp">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../styles/css/styless.css">
</head>

<body data-bs-theme="dark">
    <div id="navbar"></div>

    <div class="container py-4">
        <h2 class="mb-4 text-center">Mis Productos Favoritos ❤️</h2>

        <div id="fav-list" class="row justify-content-center"></div>
    </div>
        <main>
        <div class="container-fluid">
            <div id="product-list"
                 class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 my-5 mx-2">
            </div>
        </div>

        <footer>
            <p>© 2025 ZAMMOT - Todos los derechos reservados.</p>
        </footer>
    </main>

    <script src="../js/dataPages.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/navbar.js"></script>
    <script src="../js/wishlist.js"></script>
    <script src="../js/carrito.js"></script>
    <script src="../js/renderProducts.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {

            renderNavbar();
            updateWishlistCount();

            const list = loadWishlist();
            const container = document.getElementById("fav-list");

            //si no hay favoritos..
            if (list.length === 0) {
                container.innerHTML = `
                    <div class="d-flex justify-content-center mt-5">
                        <div class="p-5 rounded shadow-lg text-center"
                             style="
                                background: rgba(255,255,255,0.08); 
                                backdrop-filter: blur(6px); 
                                max-width: 500px;
                                animation: fadeIn .6s ease;
                             ">

                            <div class="mb-3">
                                <i class="bi bi-heartbreak-fill" style="font-size: 4rem; color: #dc3545;"></i>
                            </div>

                            <h3 class="fw-bold mb-3">Todavía no agregaste favoritos</h3>

                            <p class="text-white-50 mb-4">
                                Cuando marques un producto con ❤️ aparecerá acá para verlo más tarde.
                            </p>

                            <a href="../pages/home.html" class="btn btn-primary px-4 py-2">
                                <i class="bi bi-shop"></i> Ir a comprar
                            </a>
                        </div>
                    </div>

                    <style>
                        @keyframes fadeIn {
                            from { opacity: 0; transform: translateY(10px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                    </style>
                `;
                return;
            }

            // si hay fav...
            loadProducts().then(() => {

                let favorites = PRODUCTS_CACHE.filter(p => list.includes(p.id));

                favorites.forEach(product => {
                    container.innerHTML += `
                        <div class="col-md-4 d-flex justify-content-center" id="card-${product.id}">
                            ${renderProductCard(product)}
                        </div>
                    `;
                });

                favorites.forEach(p => updateWishlistIcon(p.id));
            });
        });
    </script>

</body>
</html>
